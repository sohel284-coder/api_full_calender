{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Lysa Calendar</title>

	<link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="{% static 'css/all.min.css' %}">
	<!-- <link rel="stylesheet" href="{% static 'custom.css' %}"> -->
	<link rel="stylesheet" href="{% static 'style.css' %}">

	<link rel="stylesheet" href="{% static 'full_calendar/main.css' %}">
	<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
	<style>
		.fc .fc-details-button {
			background-color: blue;
		}



		#app {
			/* background-color: rgb(251, 199, 251); */
		}

		@media screen and (max-width:767px) {
			.fc .fc-toolbar.fc-header-toolbar {
				font-size: 60%
			}

			.fc .fc-timegrid-slot {
				font-size: 60%;

			}

		}

		.fc .fc-details-button {
			background-color: blue;
		}


		.fc .fc-view-harness {
			background-color: #fff !important;
			width: 75%;
			margin: auto;

		}

		.fc .fc-timegrid-slot {
			height: 1px;
			border-bottom: 0 !important;
			/* background-color: floralwhite; */


		}

		.fc .fc-view-harness fc-view-harness-active {
			background-color: antiquewhite;
		}


		.calendar-wd__popbar {
			background: #FFCBC3;
			z-index: 3333;
			position: absolute;
			text-align: left;
			padding: 10px;
			border-radius: 4px;
			top: 2%;
			left: 2%;
			width: 96%;
			height: 100%;
			border-radius: 15px;
			color: #F37764;
			z-index: 999999;
		}

		.calendar-wd__form-three_drag {
			opacity: 0;
			visibility: hidden;
			transition: all 0.3s ease;
			transform: translateY(-20px);
		}

		.calendar-wd__form-three_drag.active-event {
			opacity: 1;
			visibility: visible;
			transform: translateY(0px);
		}

		.calendar-wd__form-three_drag {
			background: #fff;
			width: 800px;
			margin: 0 auto;
			right: 0;
			position: absolute;
			z-index: 999999;
			box-shadow: 0px 0px 5px #00000054;
			top: 25px;
			padding: 0;
			border: none;
			z-index: 333333333333;
			left: -100px;
		}

		.calendar-wd__form-three_success.active-event {
			opacity: 1;
			visibility: visible;
			transform: translateY(0px);
		}

		.calendar-wd__form-three_success {
			background: #fff;
			width: 450px;
			height: 500px;
			margin: 0 auto;
			right: 0;
			position: absolute;
			z-index: 999999;
			box-shadow: 0px 0px 5px #00000054;
			top: 25px;
			padding: 0;
			border: none;
			visibility: hidden;
			z-index: 333333333333;
			left: -100px;
		}

		.form-group.project-dropdown:before {
			content: "";
			position: absolute;
			left: 10px;
			top: 10px;
			width: 10px;
			height: 10px;
			background: #FFCBC3;
			z-index: 333;
			border-radius: 100%;
		}

		div.project-dropdown select:before {
			content: "";
			position: absolute;
			left: 0;
			width: 10px;
			height: 10px;
			background: red;
		}

		.form-group.project-dropdown select {
			padding-left: 20px;
		}

		.form-control {
			border: solid 1px #eee;
			text-align: center;
		}

		body {
			overflow-y: hidden;
			/* background: #FFCBC3; */
			background-image: url('{% static "img/bg-image.png" %}');

		}



		.v-select .dropdown-toggle .clear {
			display: none;
		}

		#calendar_wd {
			overflow-y: scroll;
			min-height: 350px;
			max-height: 400px;
		}

		.calendar-wd__form-three_drag {
			overflow: scroll;
			min-height: 350px;
			max-height: 600px;
		}

		.ms-n5 {
			margin-left: -40px;
		}

		input:focus {
			outline: none !important;
			border-color: #FFCBC3;
			box-shadow: 0 0 5px #FFCBC3;
		}

		.form-control:focus {
			outline: none !important;
			border-color: #FFCBC3;
			box-shadow: 0 0 5px #FFCBC3;
		}

		.cal-name {
			width: fit-content;
			margin-bottom: 0px;
			border-radius: 16px;
		}

		.thanks-card {
			border: solid 2px rgb(92, 206, 221);
			box-shadow: 0px 1px 4px rgb(92, 206, 221);
		}

		.fc .fc-list-table td,
		.fc .fc-list-day-cushion {
			padding: 20px;
			width: auto;
			/* background-color: #FFCBC3; */
		}
	</style>


</head>

<body>


	<div class="container mt-4">
		<div class="calendar-wd__section" id="app">
			<div class="calendar-wd">
				<div id='calendar'></div>
				<br>
				<br>
				<div class="calendar-wd__form calendar-wd__form-three">
					<div class="close-icon close-three" @click.prevent="onClose"><img src="{% static 'img/close.png' %}"
							alt=""></div>
					<div class="calendar-wd__form-three--one">
						<div class="calendar-wd__form-three-head">
							<ul class="list-group calendar-wd__form-three-list" id="list-tab" role="tablist"
								style="list-style-type:none">
								<li><a @click.prevent="onEdit" class="list-group-item" data-bs-toggle="list" href="#"
										role="tab"><img src="{% static 'img/pen.png' %}" alt="#"></a></li>
								<li><a class="list-group-item" @click.prevent="onDelete" data-bs-toggle="list" href="#"
										role="tab"><i class="far fa-trash-alt"
											style="font-size:20px; color: black;"></i></a></li>
								<li><a class="list-group-item" data-bs-toggle="list" href="#" role="tab"><img
											src="{% static 'img/message.png' %}" alt="#"></a></li>
								<li><a class="list-group-item" data-bs-toggle="list" href="#f-tab6" role="tab"><i
											class="icofont-bread"></i><img src="{% static 'img/bell-2.png' %}"
											alt="#"></a>
								</li>
								<!-- <li><a class="list-group-item" data-bs-toggle="list" href="#f-tab6" role="tab" style="display: none;"><i
											class="icofont-bread"></i><img src="{% static 'img/bell-2.png' %}" alt="#"></a>
								</li> -->
							</ul>
							<img src="{% static 'img/calander-banner.png' %}">
							<!-- delete modal start here -->

						</div>
						<div class="calendar-wd__form-three-body" id="calendar_wd">
							<div class="tab-content" id="nav-tabContent">
								<!-- Property Tab One -->
								<div class="tab-pane fade show active" id="f-tab3" role="tabpanel">
									<div class="calendar-wd__form-separate-column">
										<div class="calendar-wd__form-three-one">
											<div class="calendar-wd__form-three-title">
												<span class="text-white px-3 py-1"
													:style="{background:event_color}">[[calendar_name]]</span>
											</div>
											<p class="mt-0">[[event_title]]</p>
											<div class="calendar-wd__form-body">
												<div class="calendar-wd__form-single">
													<h4 class="calendar-wd__form-heading"><i
															class="far fa-calendar-alt"></i>
														[[interval]]</h4>
												</div>
												<div class="calendar-wd__form-single">
													<span><i class="fas fa-map-marker-alt"
															style="color: #FFCBC3; font-size: 22px;"></i></span>
													<span class="ms-3"><a href="#">[[event_location]]</a></span>

													<!-- <h4 class="calendar-wd__form-heading"></h4> -->
												</div>
												<div class="calendar-wd__form-single">
													<p style='text-align: left;white-space:pre-line;'>
														[[description]]
													</p>
												</div>
											</div>
										</div>
										<div class="calendar-wd__form-three-two">
											<ul class="calendar-wd__form-list-img calendar-wd__form-list-two"
												v-for="attendee in calendar_attendees">
												<li><img src="{% static 'img/icon.png' %}"
														alt="#">[[attendee.event_attendee_email]]</li>

											</ul>

										</div>
									</div>
								</div>
								<div class="tab-pane fade" id="f-tab4" role="tabpanel">
									<div class="calendar-wd__form-three--two">
										<div class="">
											<form @submit.prevent="oneditEvent(edit.event_id)">
												<div class="form-group row">
													<div class="col-2">
														<label for="eventName" class="mt-2">Event Name :</label>
													</div>
													<div class="col-10">
														<input id="eventName" v-model="edit.event_title" type="text"
															class="form-control form-control-lg">
													</div>
												</div>
												<div class="form-group row mt-5" v-if="edit.isallDay">
													<div class="col-2">
														<label class="mt-2" for="startDate"> Start Date :</label>
													</div>
													<div class="col-4">
														<input id="startDate" v-model="edit.start_date" type="text"
															class="form-control form-control-lg">
													</div>
													<div class="col-2">
														<label class="mt-2" for="endtDate"> End Date :</label>
													</div>
													<div class="col-4">
														<input id="endDate" v-model="edit.end_date" type="text"
															class="form-control form-control-lg">
													</div>
												</div>
												<div class="form-group row mt-5" v-else>
													<div class="col-2">
														<label class="mt-2" for="startDate"> Start Date :</label>
													</div>
													<div class="col-10">
														<input id="startDate" v-model="edit.start_date" type="text"
															class="form-control form-control-lg">
													</div>
												</div>

												<div class="form-group row mt-5">
													<div class="col-2">
														<label class="mt-2" for="startTime"> Start Time :</label>
													</div>
													<div class="col-4">
														<input id="startTime" v-model="edit.start_time" type="text"
															class="form-control form-control-lg">
													</div>
													<div class="col-2">
														<label class="mt-2" for="endtTime"> End Time :</label>
													</div>
													<div class="col-4">
														<input id="endTime" type="text" v-model="edit.end_time"
															class="form-control form-control-lg">
													</div>
												</div>
												<div class="form-group row mt-5">
													<div class="col-2">
														<label for="eventLocation" class="mt-2">Location :</label>
													</div>
													<div class="col-10">
														<input id="eventLocation" v-model="edit.event_location"
															type="text" class="form-control form-control-lg">
													</div>
												</div>
												<div class="form-group row mt-5">
													<div class="col-2">
														<label for="eventDescription" class="mt-2">Description :</label>
													</div>
													<div class="col-10">
														<textarea class="form-control py-3" id=""
															v-model="edit.description" rows="3"></textarea>

													</div>
												</div>
												<div class="form-group row mt-5">
													<div class="col-2">
														<label for="calendarName" class="mt-2">Calendar Name :</label>
													</div>
													<div class="col-10">
														<v-select :options="edit.options" class="select"
															v-model="edit.selected" :clearable="false" label="title">
															<template v-slot:option="option">
																<i :class="option.icon"
																	:style="{color:option.color}"></i> [[ option.title
																]]
															</template>
															<!-- <template slot="selected-option" slot-scope="option">
																<i :class="editselectedName.icon"
																	:style="{color:editselectedName.color}"></i> [[ editselectedName.title
																]]
															</template> -->
														</v-select>

													</div>
												</div>
												<div class="form-group row">
													<div class="col-2">
														<label for="">Add Participants</label>
													</div>
													<div class="col-10">
														<div class="input-group mb-3">
															<input class="card w-100 text-center" type="text"
																v-model="edit.participant" aria-label="Attendee"
																aria-describedby="basic-addon1">
															<span class="input-group-append">
																<button @click="editParticipants"
																	class="card bg-white ms-n5 my-2 text-dark py-2 px-2"
																	type="button" id="basic-addon1">
																	<i class="fas fa-plus"></i>
																</button>
															</span>
														</div>
														<div class="list-group item text-center"
															v-for="p in edit.participants">
															<h6 class="text-dark">[[p]]</h6>
														</div>
													</div>
												</div>
												<div class="form-group row mt-5">
													<div class="col-2"></div>
													<div class="col-8">
														<div class="btn-toolbar text-center">
															<button type="button" id="btnSubmit"
																class="btn btn-secondary btn-lg me-3">More
																Options</button>
															<button type="submit" id="btnSubmit"
																class="btn btn-primary btn-lg me-3">Save</button>
															<button type="button" @click.prevent="backTopopup"
																id="btnCancel"
																class="btn btn-danger btn-lg">Cancel</button>
														</div>
													</div>
													<div class="col-2"></div>
												</div>
											</form>

										</div>
									</div>
								</div>

								<div class="tab-pane fade" id="f-tab_delete" role="tabpanel">
									<div class="calendar-wd__form-three--two">
										<div class="calendar-wd__form-1">
											<form class="form" @submit.prevent="onDeleteEvent(event_id)">
												<h1 class="text-center mb-3">Are you sure want to delete Event?</h1>
												<div class="form-group button">
													<button class="btn btn-danger btn-sm"
														@click.prevent="backTopopup">cancel</button>
													<button type="submit"
														class="btn btn-primary btn-sm ms-3">Yes</button>
												</div>
											</form>
										</div>
									</div>
								</div>

							</div>
						</div>
					</div>
				</div>
				<div class="calendar-wd__form calendar-wd__form-three_drag">
					<div class="close-icon close-three me-3 mt-2" @click="onCloseDrag"><img
							src="{% static 'img/close.png' %}" alt="">
					</div>

					<div class="calendar-wd__form-three-body">
						<div class="calendar-wd__form-three--two">
							<div class="calendar-wd__form-1">
								<form action="" @submit.prevent="saveEvent" id="saveForm">
									<div class="form-group row">
										<div class="col-2">
											<label for="eventName" class="mt-2">Event Name :</label>
										</div>
										<div class="col-10">
											<input id="eventName" v-model="drag.drag_event_name" type="text"
												class="form-control form-control-lg">
										</div>
									</div>
									<div class="form-group row mt-5" v-if="drag.isallDay">
										<div class="col-2">
											<label class="mt-2" for="startDate"> Start Date :</label>
										</div>
										<div class="col-4">
											<input id="startDate" v-model="drag.start_date" type="text"
												class="form-control form-control-lg">
										</div>
										<div class="col-2">
											<label class="mt-2" for="endtDate"> End Date :</label>
										</div>
										<div class="col-4">
											<input id="endDate" v-model="drag.end_date" type="text"
												class="form-control form-control-lg">
										</div>
									</div>
									<div class="form-group row mt-5" v-else>
										<div class="col-2">
											<label class="mt-2" for="startDate"> Start Date :</label>
										</div>
										<div class="col-10">
											<input id="startDate" v-model="drag.start_date" type="text"
												class="form-control form-control-lg">
										</div>
									</div>

									<div class="form-group row mt-5">
										<div class="col-2">
											<label class="mt-2" for="startTime"> Start Time :</label>
										</div>
										<div class="col-4">
											<input id="startTime" v-model="drag.start_time" type="text"
												class="form-control form-control-lg">
										</div>
										<div class="col-2">
											<label class="mt-2" for="endtTime"> End Time :</label>
										</div>
										<div class="col-4">
											<input id="endTime" type="text" v-model="drag.end_time"
												class="form-control form-control-lg">
										</div>
									</div>
									<div class="form-group row mt-5">
										<div class="col-2">
											<label for="eventLocation" class="mt-2">Location :</label>
										</div>
										<div class="col-10">
											<input id="eventLocation" v-model="drag.location" type="text"
												class="form-control form-control-lg">
										</div>
									</div>
									<div class="form-group row mt-5">
										<div class="col-2">
											<label for="eventDescription" class="mt-2">Description :</label>
										</div>
										<div class="col-10">
											<textarea id="eventDescription" v-model="drag.description"
												class="form-control form-control-lg" rows="3"></textarea>

										</div>
									</div>
									<div class="form-group row mt-5">
										<div class="col-2">
											<label for="calendarName" class="mt-2">Calendar Name :</label>
										</div>
										<div class="col-10">
											<v-select :options="options" v-model="selected" label="title">
												<template v-slot:option="option">
													<i :class="option.icon" :style="{color:option.color}"></i> [[
													option.title ]]
												</template>
												<!-- <template slot="selected-option" slot-scope="option">
													<i :class="selectedName.icon" :style="{color:selectedName.color}"></i> [[
													selectedName.title ]]
												</template> -->
											</v-select>

										</div>
									</div>
									<div class="form-group row">
										<div class="col-2">
											<label for="">Add Participant</label>
										</div>
										<div class="col-10">
											<div class="input-group mb-3">
												<input class="card w-100 text-center" type="text" v-model="participant"
													aria-label="Attendee" aria-describedby="basic-addon1">
												<span class="input-group-append">
													<button @click="addParticipants"
														class="card bg-white ms-n5 my-2 text-dark py-2 px-2"
														type="button" id="basic-addon1">
														<i class="fas fa-plus"></i>
													</button>
												</span>
											</div>
											<div class="list-group item text-center" v-for="p in participants">
												<h6 class="text-dark">[[p]]</h6>
											</div>

										</div>
									</div>
									<div class="form-group row mt-5">
										<div class="col-2"></div>
										<div class="col-8">
											<div class="btn-toolbar text-center">
												<button type="button" id="" class="btn btn-secondary btn-lg me-3">More
													Options</button>
												<button type="submit" id="btnSubmit"
													class="btn btn-primary btn-lg me-3">Save</button>
												<button type="button" @click.prevent="onCloseDrag" id="btnCancel"
													class="btn btn-danger btn-lg">Cancel</button>
											</div>
										</div>
										<div class="col-2"></div>
									</div>
								</form>

							</div>
						</div>
					</div>
				</div>
				<div class="calendar-wd__form calendar-wd__form-three_success">
					<div class="close-icon close-three me-3 mt-2" @click="onCloseSuccess"><img
							src="{% static 'img/close.png' %}" alt="">
					</div>

					<div class="calendar-wd__form-three-body">
						<div class="row">
							<div class="col-12">
								<div class="card thanks-card">
									<img src="{% static 'img/thanks.png' %}" class="d-block w-100" alt="">
								</div>
							</div>
						</div>
						<div class="row mt-5">
							<div class="col-12">
								<center>
									<div class="cal-name card px-2"
										:style="{backgroundColor:this.selected.color, border:this.selected.color}">
										<h6 class="mb-0 text-white">[[success_cal_name]]</h6>
									</div>
									<h6 class="event-name mt-3">[[success_event_name]]</h6>
									<h6 class="date-pick mt-3"><i class="far fa-calendar-alt me-3"></i>[[success_date]]
									</h6>
									<h3 class="mt-3" style="color: #F37764;">Saved!</h3>
								</center>

							</div>

						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<br>
	<br>




	<script src="{% static 'js/jquery.min.js' %}"></script>
	<script src="https://code.jquery.com/ui/1.13.0/jquery-ui.js"></script>
	<script src="{% static 'js/all.min.js' %}"></script>

	<script src="{% static 'js/bootstrap.min.js' %}"></script>
	<script src="{% static '/full_calendar/main.js'%}"></script>
	<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

	<script src='https://cdn.jsdelivr.net/npm/moment@2.27.0/min/moment.min.js'></script>
	<script src='https://cdn.jsdelivr.net/npm/@fullcalendar/moment@5.5.0/main.global.min.js'></script>

	{% if debug %}
	<script src="{% static 'js/vue.js' %}"></script>
	{% else %}
	<script src="{% static 'js/vue.min.js' %}"></script>
	{% endif %}
	<script src="https://unpkg.com/vue-select@2.4.0/dist/vue-select.js"></script>

	<script>

		Vue.component("v-select", VueSelect.VueSelect);
		var app = new Vue({
			el: '#app',
			delimiters: ['[[', ']]'],
			data: {
				options: [

				],
				calHeight: null,
				selected: '',
				activeColor: '',
				participant: '',
				participants: [],
				weekly_events: [],
				popup: false,
				event_title: '',
				calendar_name: '',
				attendees: [],
				calendars: [],
				start_time: '',
				end_time: '',
				event_location: '',
				start_date: '',
				edit_st_date: '',
				description: '',
				popup: false,
				flag: null,
				interval: '',
				cal_name: null,
				event_id: null,
				event_color: '',
				allDayEvent: false,
				single_day_start_date: '',
				single_day_end_date: '',
				calendar_attendees: [],
				success_event_name: '',
				success_cal_name: '',
				success_date: '',

				all_day_start_date: '',
				all_day_end_date: '',
				styleObject: {
					color: 'red',
					fontSize: '28px',
				},


				edit: {
					event_title: '',
					attendees: [],
					calendars: [],
					options: [],
					calendar_name: '',
					event_location: '',
					description: '',
					start_date: '',
					end_date: '',
					event_id: null,
					selected: '',
					participant: '',
					participants: [],

					start_time: '',
					end_time: '',

					isallDay: false,
					single_day_start_date: '',
					single_day_end_date: '',
					// single_day_start_time: '',
					// single_day_end_time: '',

					all_day_start_date: '',
					all_day_end_date: '',
					// all_day_start_time: '00:00',
					// all_day_end_time: '00:00',
				},
				drag: {
					selectionInfo: null,
					calendar: '',
					drag_event_name: '',
					location: '',
					start_date: '',
					end_date: '',
					start_time: '',
					end_time: '',
					cal_name: '',
					cal_color: '',
					description: '',
					isallDay: false,
				}

			},

			mounted: function () {
				this.showEvents();
				this.getCalendars();
			},
			computed: {
				selectedName: function () {
					this.activeColor = this.selected.color;
					return this.selected;
				},
				editselectedName: function () {
					return this.edit.selected;
				}
			},
			methods: {
				getColor: function () {
					return 'bg-primary me-2'
				},

				onClose: function () {
					console.log('test');
					this.edit.participant = ' ';
					this.edit.participants = [];
					$(".calendar-wd__form-three").toggleClass('active-event');
				},
				onCloseDrag: function () {
					$("#eventpick").val('');
					this.participants = [];
					this.drag.drag_event_name = ' ';
					this.drag.location = ' ';
					this.drag.description = ' ';
					this.participant = ' ';
					$(".calendar-wd__form-three_drag").toggleClass('active-event');

				},
				onCloseSuccess: function () {
					$(".calendar-wd__form-three_success").toggleClass('active-event');

				},
				editParticipants: function () {
					console.log(this.participant);
					var formData = {}
					formData.event = this.event_id;
					formData.attendee = this.edit.participant;
					$.ajax({
						method: 'POST',
						url: 'api/add-participant/',
						data: JSON.stringify(formData),
						contentType: 'application/json',
					}).then(response => {
						if (!response) {
							var participants = this.edit.participant.split(',')
							if (participants.length > 1) {
								console.log(participants);

								// this.edit.participants = this.edit.participants.concat(participants);
								for (var i = 0; i < participants.length; i++) {
									a = participants[i].toLowerCase().replace(/\s+/g,"");
									if(!this.edit.participants.includes(a)){
										this.edit.participants.push(participants[i])
									}
								}
								console.log(this.edit.participants);
							}
							else {
								if (!this.edit.participants.includes(this.edit.participant)) {
									this.edit.participants.push(this.edit.participant)
								}
								else {
									alert('this attendee is already added');
								}
							}

						}
						else {
							alert('this attendee is already added');
						}
						this.edit.participant = '';
					}).fail(errors => {
						console.log(errors)
					})


				},
				addParticipants: function () {
					var participants = this.participant.split(',')
					console.log(participants);
					if (participants.length > 1) {
						console.log(participants);
						this.participants = participants;

					}
					else {
						if (!this.participants.includes(this.participant)) {
							this.participants.push(this.participant)
						}
						else {
							alert('this attendee is already added');
						}
					}
					this.participant = ' ';


				},

				onEdit: function () {
					$('#f-tab4').addClass('show active');
					$('#f-tab3').removeClass('show active');


					console.log(this.event_color);
					if (this.allDayEvent == true) {
						this.edit.isallDay = true;

						this.edit.start_date = this.all_day_start_date;
						this.edit.end_date = this.all_day_end_date;
					}
					else {
						console.log(this.single_day_start_date);
						console.log(this.single_day_end_date);
						var single_st_date = new Date(this.single_day_start_date);
						var single_ed_date = new Date(this.single_day_end_date);
						single_st_date = single_st_date.getDate();
						single_end_date = single_ed_date.getDate();

						if (single_st_date == single_end_date) {
							this.edit.isallDay = false;
							this.edit.start_date = this.single_day_start_date;
							this.edit.end_date = this.single_day_start_date;

						}
						else {
							this.edit.isallDay = true;
							this.edit.start_date = this.single_day_start_date;
							this.edit.end_date = this.single_day_end_date;
						}


					}

					this.edit.event_title = this.event_title;
					this.edit.attendees = this.attendees;
					this.edit.calendars = this.calendars;
					this.edit.start_time = this.start_time;
					this.edit.end_time = this.end_time;
					this.edit.event_location = this.event_location
					this.edit.description = this.description;
					this.edit.event_id = this.event_id;


					// $(".dot").css('backgroundColor', this.event_color);
					// $(".dot").css('border-radius', '50%');
					// $(".dot").css('height', '25px');
					// $(".dot").css('width', '25px');
					// $(".dot").css('display', 'inline-block');

				},
				onDelete: function () {
					$("#f-tab_delete").addClass('show active');
					$('#f-tab3').removeClass('show active');
					$('#f-tab4').removeClass('show active');

				},
				oneventList:function(){
					console.log('hello');
					alert('hello');

				},
				backTopopup: function () {
					this.edit.event_title = '';
					this.edit.attendees = [];
					this.edit.calendars = [];
					this.edit.calendar_name = '';
					this.edit.event_location = '';
					this.edit.start_time = '';
					this.edit.end_time = '';
					this.edit.description = '';
					this.edit.interval = '';
					this.edit.participant = ' ';
					this.edit.participants = [];
					$('#f-tab4').removeClass('show active');
					$('#f-tab3').addClass('show active');
					$("#f-tab_delete").removeClass('show active');

				},
				selectedCalendar: function (value) {
					console.log(value);
					alert('selected Calendar');
					this.drag.cal_name = this.cal_name;

				},

				showEvents: function () {
					var that = this;
					$.ajax({
						method: 'GET',
						url: 'api/event-filter/' + 'weekly',
					}).then(response => {
						console.log(response);

						that.weekly_events = response.events;

						that.weeklyCalendar();
					})
				},
				oneditEvent: function (event_id) {
					this.edit.calendar_name = this.edit.selected.title;

					console.log(this.edit.calendar_name);
					let formData = {}
					console.log(this.edit.calendar_name, 'calendar_name');
					console.log(this.edit.start_date);
					console.log(this.edit.start_time);
					console.log(this.allDayEvent);
					console.log(new Date(this.edit.start_date));


					var st_month = ("0" + (new Date(this.edit.start_date).getMonth() + 1)).slice(-2);
					var st_date = ("0" + (new Date(this.edit.start_date).getDate())).slice(-2);

					var ed_month = ("0" + (new Date(this.edit.end_date).getMonth() + 1)).slice(-2);
					console.log(ed_month);
					var ed_date = ("0" + (new Date(this.edit.end_date).getDate())).slice(-2);


					var new_start_date = '2022' + '-' + st_month + '-' + st_date + "T" + this.edit.start_time + ":00";
					console.log(new_start_date, 'new start date')

					if (this.allDayEvent) {
						ed_date = ed_date - 1;
						if (ed_date == 0) {
							ed_date = st_date;
							ed_month = st_month;
							ed_year = st_year;
						}
						var new_end_date = '2022' + '-' + ed_month + '-' + ed_date + "T" + this.edit.end_time + ":00";

					}
					else {
						var new_end_date = '2022' + '-' + st_month + '-' + st_date + "T" + this.edit.end_time + ":00";
					}



					// if (!this.allDayEvent) {
					// 	var new_end_date = '2022' + '-' + st_month + '-' + st_date + "T" + this.edit.end_time + ":00";
					// 	console.log(new_end_date, 'if secrion new end date');

					// }
					// else {
					// 	var new_end_date = '2022' + '-' + ed_month + '-' + ed_date + "T" + this.edit.end_time + ":00";
					// 	console.log(new_end_date, 'else new end date');
					// }
					console.log(this.edit.event_location);

					formData.event_name = this.edit.event_title;
					formData.event_start_dt = new_start_date;
					formData.event_end_dt = new_end_date;
					formData.event_description = this.edit.description;
					formData.event_location = this.edit.event_location;
					formData.calendar_info_id = this.edit.calendar_name;
					formData.attendees = this.edit.participants;
					$.ajax({
						method: 'PUT',
						url: 'api/edit-event/' + event_id,
						data: JSON.stringify(formData),
						contentType: 'application/json'
					}).then(response => {
						console.log(response);
						this.edit.participant = '';
						this.edit.participants = [];
						this.showEvents();
						$(".calendar-wd__form-three").toggleClass('active-event');
						// $('#f-tab4').removeClass('show active');

						// $('#f-tab3').addClass('show active');

					}).fail(errors => {
						console.log(errors);
					})
				},
				onDeleteEvent: function (event_id) {
					console.log(event_id);
					$.ajax({
						method: 'DELETE',
						url: 'api/delete-event/' + event_id,
					}).then(response => {
						location.href = '/';
					}).fail(errors => {
						console.log(errors);
					})
				},
				getCalendars: function () {
					var that = this;
					$.ajax({
						method: 'GET',
						url: 'api/calendars/',
					}).then(response => {
						that.calendars = response;
						for (var i = 0; i < that.calendars.length; i++) {
							var singleObj = {}
							singleObj['title'] = that.calendars[i].calendar_name;
							singleObj['icon'] = 'fas fa-circle';
							singleObj['color'] = that.calendars[i].calendar_color;
							that.options.push(singleObj);
							that.edit.options.push(singleObj);
						}
						console.log(that.options);
						console.log(that.calendars);
						that.cal_name = response[0].calendar_name;
						that.selected = that.options[0];
					})
				},

				saveEvent: function () {

					console.log(this.drag.drag_event_name);
					calendar = this.drag.calendar;
					console.log(this.selected);
					console.log(this.selectedName)
					this.drag.cal_name = this.selected.title;
					console.log(this.drag.cal_name)

					console.log(this.drag.selectionInfo.allDay);
					$.ajax({
						method: 'GET',
						url: 'api/cal-color/' + this.drag.cal_name,
					}).then(response => {
						console.log(response);
						calendar.addEvent({
							title: this.drag.drag_event_name,
							start: this.drag.selectionInfo.start,
							end: this.drag.selectionInfo.end,
							allDay: this.drag.selectionInfo.allDay,
							color: response,
						});
						this.calendar_name = this.drag.cal_name;
						this.saveBackendEvent();

					})


					$(".calendar-wd__form-three_drag").toggleClass('active-event');
				},
				saveBackendEvent: function () {
					console.log(this.drag.cal_name);
					var st_year = (this.drag.selectionInfo.start).getFullYear();
					console.log(st_year)
					var ed_year = (this.drag.selectionInfo.end).getFullYear();
					console.log(ed_year)
					var st_month = ("0" + (new Date(this.drag.start_date).getMonth() + 1)).slice(-2);
					var st_date = ("0" + (new Date(this.drag.start_date).getDate())).slice(-2);

					var ed_month = ("0" + (new Date(this.drag.end_date).getMonth() + 1)).slice(-2);
					console.log(ed_month);
					var ed_date = ("0" + (new Date(this.drag.end_date).getDate())).slice(-2);
					if (this.drag.selectionInfo.allDay) {
						ed_date = ed_date - 1;
						if (ed_date == 0) {
							ed_date = st_date;
							ed_month = st_month;
							ed_year = st_year;
						}
					}


					var new_start_date = st_year + '-' + st_month + '-' + st_date + "T" + this.drag.start_time + ":00";
					console.log(new_start_date, 'new start date')
					var new_end_date = ed_year + '-' + ed_month + '-' + ed_date + "T" + this.drag.end_time + ":00";

					var formData = {};
					console.log(this.drag.selectionInfo.allDay)
					formData.event_name = this.drag.drag_event_name;
					formData.event_start_dt = new_start_date;
					formData.event_end_dt = new_end_date;
					formData.event_description = this.drag.description;
					formData.event_location = this.drag.location;
					formData.calendar_info_id = this.drag.cal_name;
					formData.all_day_flg = this.drag.selectionInfo.allDay;
					formData.attendees = this.participants;

					$.ajax({
						method: 'POST',
						url: 'api/drag-event-save/',
						data: JSON.stringify(formData),
						contentType: 'application/json'
					}).then(response => {
						// location.href = '/';
						function clock(){
							$('.calendar-wd__form-three_success').removeClass('active-event');
						}
						console.log(response);
						console.log(new_start_date);
						console.log(new_end_date);
						var st = new Date(new_start_date);
						var ed = new Date(new_end_date);
						console.log(st);
						var st_date = st.getDate();
						var st_year = st.getFullYear();
						var st_month = st.toLocaleString('en-us', { month: 'long' });
						var st_day = st.toLocaleString('en-us', { weekday: 'short' });
						var st_minute = ('0' + st.getMinutes()).slice(-2);
						var st_hour = ('0' + st.getHours()).slice(-2);;

						var ed_date = ed.getDate();
						var ed_year = ed.getFullYear();
						var ed_month = ed.toLocaleString('en-us', { month: 'long' });
						var ed_day = ed.toLocaleString('en-us', { weekday: 'short' });
						var ed_minute = ('0' + ed.getMinutes()).slice(-2);
						var ed_hour = ('0' + ed.getHours()).slice(-2);

						this.success_event_name = this.drag.drag_event_name;
						this.success_cal_name = this.drag.cal_name;
						// this.success_color = this.selected.color;

						if (this.drag.selectionInfo.allDay) {
							if (st_date == ed_date) {
								this.success_date = st_month + ' ' + st_date + ' ' + '(' + st_day + ')';
							}
							else {
								this.success_date = st_month + ' ' + st_date + ' ' + '(' + st_day + ')' + ' - ' + ed_month + ' ' + ed_date + ' ' + '(' + ed_day + ')'
							}
						}
						else {
							if (st_date != ed_date) {
								this.success_date = st_month + ' ' + st_date + ' ' + '(' + st_day + ') ' + st_hour + ':' + st_minute + ' - ' + ed_month + ' ' + ed_date + ' ' + '(' + ed_day + ') ' + ed_hour + ':' + ed_minute;;
							}
							else {
								this.success_date = st_month + ' ' + st_date + ' ' + '(' + st_day + ') ' + st_hour + ':' + st_minute + ' - ' + ed_hour + ':' + ed_minute;

							}
						}
						$('.calendar-wd__form-three_success').addClass('active-event');


						this.drag.drag_event_name = ' ';
						this.drag.description = ' ';
						this.drag.location = ' ';
						this.drag.cal_name = ' ';
						this.selectedName = ' ';
						this.participants = [];

						setInterval(clock, 2000);
						this.showEvents();

					}).fail(errors => {
						alert('falid to create');
						console.log(errors);
					})

				},


				weeklyCalendar: function () {
					var that = this;
					var calendarEl = document.getElementById('calendar');
					that.calHeight = $(window).height() * .96;
					$(window).resize(function () {
						var winHeight = $(this).height();
						that.calHeight = winHeight * .96;
						// location.href = '/';
						// window.location.reload();
					});

					var calendar = new FullCalendar.Calendar(calendarEl, {

						select: function (selectionInfo) {
							console.log('drag');
							$('.calendar-wd__form-three_drag').addClass('active-event');

							// if ($('.calendar-wd__form-three_drag').hasClass('active-event')) {
							// 	$("#calendar").click(function (e) {
							// 		// var dtg = $(e.target).parents(".fc-highlight").get(0);
							// 		// console.log(dtg);
							// 		// if (!dtg) {
							// 		// }
							// 		$('.calendar-wd__form-three_drag').removeClass('active-event');

							// 	});
							// }
							// else{
							// 	$('.calendar-wd__form-three_drag').addClass('active-event');
							// }
							// that.saveEvent(calendar, selectionInfo);

							if (selectionInfo.start.getDate() != selectionInfo.end.getDate()) {
								console.log(that.drag.isallDay);
								that.drag.isallDay = true;
							}
							else {
								console.log('drag_date');
								that.drag.allDay = false;

							}

							console.log(selectionInfo.start);
							var st = new Date(selectionInfo.start);
							console.log(selectionInfo.end);
							var ed = new Date(selectionInfo.end);
							console.log(ed);
							var st_date = st.getDate();
							var st_year = st.getFullYear();
							var st_month = st.toLocaleString('en-us', { month: 'long' });
							var st_day = st.toLocaleString('en-us', { weekday: 'short' });

							var ed_date = ed.getDate();
							// if(selectionInfo.allDay == true){
							// 	var ed_date = ed.getDate() - 1 ;
							// }
							// else{
							// 	ed_date = ed.getDate(); 
							// }
							// ed_date = ed.getDate();
							var ed_year = ed.getFullYear();
							var ed_month = ed.toLocaleString('en-us', { month: 'long' });
							var ed_day = ed.toLocaleString('en-us', { weekday: 'short' });
							// console.log(st_date)
							// console.log(st_year)
							// console.log(st_month)
							// console.log(st_day)
							var st_minute = ('0' + new Date(st).getMinutes()).slice(-2);
							var st_hour = ('0' + new Date(st).getHours()).slice(-2);

							var ed_minute = ('0' + new Date(ed).getMinutes()).slice(-2);
							var ed_hour = ('0' + new Date(ed).getHours()).slice(-2);



							var start_date = st_month + ' ' + st_date + ',' + ' ' + st_year + " (" + st_day + ")";
							var end_date = ed_month + ' ' + ed_date + ',' + ' ' + ed_year + " (" + ed_day + ")";

							var start_time = st_hour + ":" + st_minute;
							var end_time = ed_hour + ":" + ed_minute;
							console.log(selectionInfo);
							that.drag.selectionInfo = selectionInfo;
							that.drag.calendar = calendar;
							that.drag.start_time = start_time;
							that.drag.end_time = end_time;
							that.drag.start_date = start_date;
							that.drag.end_date = end_date;
							console.log(that.drag.start_date, that.drag.end_date, 'creating');

						},


						headerToolbar: {
							left: 'prev,add_event,slot,today',
							center: 'title',
							right: 'setting,dayGridMonth,timeGridWeek,timeGridDay,listWeek,next'
						},
						customButtons: {
							add_event: {
								text: '+ Add Event',
							},
							slot: {
								text: 'Find Slot',
							},
							setting: {
								text: 'setting',
								// bootstrapFontAwesome:'fas fa-cog',
							},

						},
						droppable: true,
						eventResizableFromStart: true,
						eventStartEditable: true,
						initialView: 'timeGridWeek',
						alldaySlot: true,
						duration: { hours: 8 },
						slotDuration: '00:30',
						navLinks: true, // can click day/week names to navigate views
						nowIndicator: true,

						weekNumbers: true,

						editable: true,
						handleWindowResize: true,
						height: that.calHeight,
						// contentHeight:'auto',
						// heigth:600,
						// contentHeight: 640,
						// defaultView: 'week',
						selectable: true,
						dayMaxEvents: true,
						allDayMaintainDuration: true,
						events: that.weekly_events,

						eventResize: function (info) {
							console.log(info);
							formData = {}

							var st_year = (info.event.start).getFullYear();
							var ed_year = (info.event.start).getFullYear();

							var st_month = ("0" + (new Date(info.event.start).getMonth() + 1)).slice(-2);
							var st_date = ("0" + (new Date(info.event.start).getDate())).slice(-2);

							var ed_month = ("0" + (new Date(info.event.end).getMonth() + 1)).slice(-2);
							console.log(ed_month);
							var ed_date = ("0" + (new Date(info.event.end).getDate())).slice(-2);

							console.log(new_start_date, new_end_date)

							if (info.event.allDay) {
								formData.all_day_flg = 1;
								ed_date = ed_date - 1;
								if (ed_date == 0) {
									ed_date = st_date;
									ed_month = st_month;
									ed_year = st_year;
								}
								var new_start_date = st_year + '-' + st_month + '-' + st_date + "T" + "00:00:00";
								var new_end_date = ed_year + '-' + ed_month + '-' + ed_date + "T" + "00:00:00";
								console.log(new_start_date, new_end_date);
							}
							else {
								formData.all_day_flg = 0;
								st = info.event.startStr
								ed = info.event.endStr
								console.log(st);
								console.log(ed);
								index_of_st = st.indexOf('+');
								index_of_ed = ed.indexOf('+');
								var st_date = info.event.startStr.slice(0, index_of_st);
								var ed_date = info.event.endStr.slice(0, index_of_ed);
								console.log(st_date);
								console.log(ed_date);
								new_start_date = st_date;
								new_end_date = ed_date;
							}

							formData.event_start_dt = new_start_date;
							formData.event_end_dt = new_end_date;
							formData.calendar_info_id = info.event._def.extendedProps.calendar_name;
							var event_id = info.event._def.extendedProps.event_id;
							$.ajax({
								method: 'PUT',
								url: 'api/edit-event/' + event_id,
								data: JSON.stringify(formData),
								contentType: 'application/json'
							}).then(response => {
								alert('success');
								that.showEvents();
							}).fail(errors => {
								alert('fail');
								console.log(errors);
							});

						},
						eventDrop: function (info) {
							console.log(info);
							formData = {}

							var st_year = (info.event.start).getFullYear();
							var ed_year = (info.event.start).getFullYear();

							var st_month = ("0" + (new Date(info.event.start).getMonth() + 1)).slice(-2);
							var st_date = ("0" + (new Date(info.event.start).getDate())).slice(-2);

							var ed_month = ("0" + (new Date(info.event.end).getMonth() + 1)).slice(-2);
							console.log(ed_month);
							var ed_date = ("0" + (new Date(info.event.end).getDate())).slice(-2);



							console.log(new_start_date, new_end_date)

							if (info.event.allDay) {
								formData.all_day_flg = 1;
								ed_date = ed_date - 1;
								if (ed_date == 0) {
									ed_date = st_date;
									ed_month = st_month;
									ed_year = st_year;
								}
								var new_start_date = st_year + '-' + st_month + '-' + st_date + "T" + "00:00:00";
								var new_end_date = ed_year + '-' + ed_month + '-' + ed_date + "T" + "00:00:00";
								console.log(new_start_date, new_end_date);
							}
							else {
								formData.all_day_flg = 0;
								st = info.event.startStr
								ed = info.event.endStr
								console.log(st);
								console.log(ed);
								index_of_st = st.indexOf('+');
								index_of_ed = ed.indexOf('+');
								var st_date = info.event.startStr.slice(0, index_of_st);
								var ed_date = info.event.endStr.slice(0, index_of_ed);
								console.log(st_date);
								console.log(ed_date);
								new_start_date = st_date;
								new_end_date = ed_date;
							}

							formData.event_start_dt = new_start_date;
							formData.event_end_dt = new_end_date;
							formData.calendar_info_id = info.event._def.extendedProps.calendar_name;
							var event_id = info.event._def.extendedProps.event_id;
							$.ajax({
								method: 'PUT',
								url: 'api/edit-event/' + event_id,
								data: JSON.stringify(formData),
								contentType: 'application/json'
							}).then(response => {
								alert('success');
								that.showEvents();
							}).fail(errors => {
								alert('fail');
								console.log(errors);
							})
						},

						eventDidMount: function (info) {
							console.log(info.view.type);
							now = new Date()
							if (info.event.end < now) {
								info.el.style.opacity = "0.5";
							}

							if (info.view.type == 'listWeek') {
								console.log(info);
								var tHead = $('.fc-list-day th')
								console.log(tHead);
								tHead.attr('colspan', 4);
								var numberOfColumnsItem = $('tr.fc-list-event');
								console.log(numberOfColumnsItem);
								var arrayLength = numberOfColumnsItem.length;
								console.log(arrayLength);
								var columnElement = document.createElement('td');
								columnElement.textContent = info.event._def.extendedProps.event_location;
								info.el.append(columnElement);
							}
						},


						eventDataTransform: function (event) {
							if (event.allDay) {
								// moment(end_date, 'YYYY-MM-DD').add(1, 'days').format('YYYY-MM-DD HH:mm:SS')                                                                                                                                            
								event.end = moment(event.end, 'YYYY-MM-DD').add(1, 'days').format('YYYY-MM-DD HH:mm:SS')
							}
							return event;
						},
						eventClick: function (event) {
							console.log(event);

							$('.calendar-wd__form-three').addClass('active-event');
							$('#f-tab4').removeClass('show active');
							$('#f-tab3').addClass('show active');
							that.event_id = event.event._def.extendedProps.event_id;
							that.event_title = event.event._def.title;
							that.event_location = event.event._def.extendedProps.event_location;
							that.description = event.event._def.extendedProps.event_description.slice(0, 400);
							that.event_color = event.event.backgroundColor;
							console.log(that.event_color);
							that.calendar_attendees = event.event._def.extendedProps.calendar_attendee
							that.allDayEvent = event.event.allDay;


							// that.participants = event.event._def.extendedProps.calendar_attendee;

							// that.start_time = new Date(event.event.start).toLocaleTimeString();
							// that.end_time = new Date(event.event.end).toLocaleTimeString();
							var st_date = new Date(event.event.start);
							var ed_date = new Date(event.event.end);
							date = st_date.getDate();
							year = st_date.getFullYear();
							month = st_date.toLocaleString('en-us', { month: 'long' });
							day = st_date.toLocaleString('en-us', { weekday: 'short' });
							that.edit_st_date = day + ',' + date + ' ' + month;
							if (event.event.allDay == true) {
								last_date = ed_date.getDate() - 1;
							}
							else {
								last_date = ed_date.getDate();
							}
							end_year = ed_date.getFullYear();
							end_month = ed_date.toLocaleString('en-us', { month: 'long' });
							end_day = ed_date.toLocaleString('en-us', { weekday: 'short' });

							that.start_date = month + ' ' + date + ',' + ' ' + year + ' ' + '(' + day + ')';

							that.end_date = end_month + ' ' + last_date + ',' + ' ' + end_year + ' ' + '(' + end_day + ')';

							var minute = ('0' + new Date(event.event.start).getMinutes()).slice(-2);
							var hour = ('0' + new Date(event.event.start).getHours()).slice(-2);

							var end_min = ('0' + new Date(event.event.end).getMinutes()).slice(-2);
							var end_hour = ('0' + new Date(event.event.end).getHours()).slice(-2);

							that.start_time = hour + ":" + minute;

							that.end_time = end_hour + ":" + end_min;

							if (date == last_date) {
								that.start_date = month + ' ' + date + ' ' + '(' + day + ')';


								if (event.event.allDay == true) {
									console.log(last_date);
									that.end_date = end_month + ' ' + (last_date + 1) + ' ' + '(' + end_day + ')';
									that.interval = that.start_date + ' ' + '00:00' + ' - ' + that.end_date + ' 00:00';
									console.log(that.interval);
									that.all_day_start_date = that.start_date;
									that.all_day_end_date = that.end_date;
									that.start_time = '00:00';
									that.end_time = '00:00';

									// that.interval = that.start_date + ' ' + '00:00' + ' - ' + '00:00'
									that.edit_interval = that.start_date + ' ' + ' - ' + that.end_date;
								}
								else {
									that.single_day_start_date = that.start_date;
									that.single_day_end_date = that.end_date;
									that.single_day_start_time = that.start_time;
									that.single_day_end_time = that.end_time;
									that.interval = month + ' ' + date + ', ' + '(' + day + ')' + ' ' + that.start_time + ' - ' + that.end_time;


								}
							}

							else {

								if (event.event.allDay == true) {
									var c = ('0' + new Date(event.event._def.extendedProps.allday_start_time).getMinutes()).slice(-2);
									var d = new Date(event.event._def.extendedProps.allday_start_time).getHours()

									var em = ('0' + new Date(event.event._def.extendedProps.allday_end_time).getMinutes()).slice(-2);
									var eh = new Date(event.event._def.extendedProps.allday_end_time).getHours()
									that.end_date = end_month + ' ' + (last_date + 1) + ',' + ' ' + end_year + ' ' + '(' + end_day + ')';
									console.log(that.end_date);
									that.interval = that.start_date + ' ' + "00:00" + ' - ' + that.end_date + ' ' + "00:00";
									that.edit_interval = that.start_date + ' ' + ' - ' + that.end_date;
									that.all_day_start_date = that.start_date;
									that.all_day_end_date = that.end_date;
									that.start_time = "00:00";
									that.end_time = "00:00";

								}
								else {
									console.log(that.end_time);
									// console.log(that.end_date);
									// var c = ('0' + new Date(event.event._def.extendedProps.allday_start_time).getMinutes()).slice(-2);
									// var d = new Date(event.event._def.extendedProps.allday_start_time).getHours()
									// console.log(c)
									// console.log(d)
									// var em = ('0' + new Date(event.event._def.extendedProps.allday_end_time).getMinutes()).slice(-2);
									// var eh = new Date(event.event._def.extendedProps.allday_end_time).getHours()
									that.interval = that.start_date + ' ' + that.start_time + ' - ' + that.end_date + ' ' + that.end_time

									that.single_day_start_date = that.start_date;
									that.single_day_end_date = that.end_date;
									that.single_day_start_time = that.start_time;
									that.single_day_end_time = that.end_time

								}

							}

							for (var item of that.calendar_attendees) {
								that.edit.participants.push(item.event_attendee_email);
							}
							console.log(that.participants);


							that.calendar_name = event.event._def.extendedProps.calendar_name
							for (var i = 0; i < that.options.length; i++) {
								if (that.options[i].title == event.event._def.extendedProps.calendar_name) {
									that.options[i].title = event.event._def.extendedProps.calendar_name;
									that.options[i].icon = 'fas fa-circle';
									that.options[i].color = that.event_color;
									that.edit.selected = that.options[i];

								}
							}
							console.log(that.edit.selected);


							that.attendees = event.event._def.extendedProps.calendar_attendee


							calender_id = event.event._def.extendedProps.calender_id;

							var flag = 1;
							// if ($('.calendar-wd__form-three').hasClass('active-event')) {
							// 	$("#calendar").click(function (e) {
							// 		var dtg = $(e.target).parents(".fc-daygrid-event").get(0);
							// 		var ttg = $(e.target).parents(".fc-timegrid-event").get(0);

							// 		if (!(dtg || ttg)) {
							// 			console.log('close');
							// 			$('.calendar-wd__form-three').removeClass('active-event');
							// 			that.edit.participant = ' ';
							// 			that.edit.participants = [];
							// 			// $('.calendar-wd__form-three_drag').removeClass('active-event');

							// 		}
							// 	});
							// }


						},



					});
					calendar.render();

				}
			},
		})

		$(document).keyup(function (e) {
			if (e.key === "Escape") {
				$('.calendar-wd__form-three').removeClass('active-event');
				$(".calendar-wd__form-three_drag").removeClass('active-event');
			}

		});


	</script>


</body>

</html>